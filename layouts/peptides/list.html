{{ define "main" }}
<div class="container">
    <div class="card p-20">
        <h2 class="text-center">å¤šè‚½æ•°æ®åº“</h2>
        
        {{ $peptides := .Site.Data.peptides }}
        
        <!-- ç»Ÿè®¡å¡ç‰‡ -->
        <div class="grid grid-3 mb-20">
            <div class="card stats-card">
                <div class="stats-number">{{ len $peptides }}</div>
                <div class="stats-label">æ€»è‚½æ•°</div>
            </div>
            <div class="card stats-card">
                <div class="stats-number">
                    {{ $targets := slice }}
                    {{ range $peptides }}
                        {{ if and .å¤šè‚½é¶ç‚¹ (not (in $targets .å¤šè‚½é¶ç‚¹)) }}
                            {{ $targets = $targets | append .å¤šè‚½é¶ç‚¹ }}
                        {{ end }}
                    {{ end }}
                    {{ len $targets }}
                </div>
                <div class="stats-label">ç‹¬ç‰¹é¶ç‚¹</div>
            </div>
            <div class="card stats-card">
                <div class="stats-number">
                    {{ $clinicalCount := 0 }}
                    {{ range $peptides }}
                        {{ if eq .æ˜¯å¦ä¸´åºŠ "Yes" }}{{ $clinicalCount = add $clinicalCount 1 }}{{ end }}
                    {{ end }}
                    {{ $clinicalCount }}
                </div>
                <div class="stats-label">ä¸´åºŠé˜¶æ®µ</div>
            </div>
        </div>

        <!-- æ“ä½œæŒ‰é’® -->
        <div class="grid grid-3 mb-20">
            <a href="/search/" class="btn btn-primary">ğŸ” æœç´¢æ•°æ®</a>
            <a href="/filter/" class="btn btn-secondary">ğŸ›ï¸ é«˜çº§ç­›é€‰</a>
            <a href="/export/" class="btn btn-outline">ğŸ“¥ å¯¼å‡ºæ•°æ®</a>
        </div>

        <!-- æ•°æ®è¡¨æ ¼ -->
        <div class="table-container">
            <table class="table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>å¤šè‚½åç§°</th>
                        <th>åºåˆ—</th>
                        <th>é¶ç‚¹</th>
                        <th>äº²å’ŒåŠ›</th>
                        <th>åº”ç”¨èŒƒå›´</th>
                        <th>ä¸´åºŠçŠ¶æ€</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody>
                    {{ range $index, $row := $peptides }}
                    <tr>
                        <td>{{ add $index 1 }}</td>
                        <td>
                            <a href="/peptides/{{ $index }}/" style="color: var(--primary-color); text-decoration: none;">
                                <strong>{{ $row.å¤šè‚½åç§° }}</strong>
                            </a>
                        </td>
                        <td><code>{{ $row.å¤šè‚½åºåˆ—N_Cç«¯ }}</code></td>
                        <td>{{ $row.å¤šè‚½é¶ç‚¹ }}</td>
                        <td>{{ $row.äº²å’ŒåŠ› }} Î¼M</td>
                        <td>{{ $row.å¤šè‚½çš„åº”ç”¨èŒƒå›´ }}</td>
                        <td>
                            <span style="background: {{ if eq $row.æ˜¯å¦ä¸´åºŠ "Yes" }}#4CAF50{{ else }}#ff9800{{ end }}; 
                            color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px;">
                                {{ $row.æ˜¯å¦ä¸´åºŠ }}
                            </span>
                        </td>
                        <td>
                            <a href="/peptides/{{ $index }}/" class="btn btn-outline" style="padding: 5px 10px; font-size: 12px;">
                                è¯¦æƒ…
                            </a>
                        </td>
                    </tr>
                    {{ end }}
                </tbody>
            </table>
        </div>
    </div>
</div>
{{ end }}
